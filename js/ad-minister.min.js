jQuery(document).ready(function(){String.prototype.format=function(){var e=arguments;return this.replace(/{(\d+)}/g,function(t,r){return"undefined"!=typeof e[r]?e[r]:t})}}),jQuery(document).ready(function(){function e(){return""==f.val()?(f.focus(),f.addClass("error"),h.text("Title cannot be empty"),h.addClass("error"),h.show(),!1):(f.removeClass("error"),h.text(""),h.removeClass("error"),h.hide(),!0)}function t(){return""==_.val()?(_.focus(),_.addClass("error"),m.text("Media URL cannot be empty"),m.addClass("error"),m.show(),!1):(_.removeClass("error"),m.text(""),m.removeClass("error"),m.hide(),!0)}function r(){return null==g.val()?(g.focus(),g.addClass("error"),A.text("Please select a banner position"),A.addClass("error"),A.show(),!1):(g.removeClass("error"),A.text(""),A.removeClass("error"),A.hide(),!0)}function a(){return n()&&o()?k.val()>w.val()?(k.addClass("error"),C.text("Start date > End date"),C.addClass("error"),C.show(),!1):(k.removeClass("error"),C.text(""),C.removeClass("error"),C.hide(),!0):!1}function n(){return""==k.val()?(k.addClass("error"),C.text("Please select a date"),C.addClass("error"),C.show(),!1):(k.removeClass("error"),C.text(""),C.removeClass("error"),C.hide(),!0)}function o(){return""==w.val()?(w.addClass("error"),x.text("Please select a date"),x.addClass("error"),x.show(),!1):(w.removeClass("error"),x.text(""),x.removeClass("error"),x.hide(),!0)}function i(e){if("undefined"==typeof e)return!1;if("object"!=typeof e&&"function"!=typeof e)return!1;"function"==typeof e&&(e={select:e,title:"Select Media",button_text:"Select",media_type:""}),"undefined"==typeof e.title&&(e.title="Select Media"),"undefined"==typeof e.button_text&&(e.button_text="Select"),"undefined"==typeof e.media_type&&(e.media_type="");var t=wp.media({frame:"select",title:e.title,button:{text:e.button_text},library:{type:e.media_type},multiple:!1}).on("select",function(){var r=t.state().get("selection").first().toJSON();e.select(r.url)}).open()}function u(e){var t,r;return t=/[\[<][^\]>]+width=['"]([\d]+)['"]/i,r=e.match(t),null!=r?r[1]+"":""}function l(e){var t,r;return t=/[\[<][^\]>]+height=['"]([\d]+)['"]/i,r=e.match(t),null!=r?r[1]+"":""}function d(e){var t={action:"administer_build_code",ad_mode:"mode_basic",ad_id:y.val(),ad_media_url:_.val(),ad_size:v.val(),ad_link_url:p.val(),ad_audio_url:j.val(),ad_hint:Q.val()};jQuery.post(ajaxurl,t,function(t){return e(t),t})}function c(e){var t,r,a;return""==e?(E.html("No content to preview."),!1):(t=u(e),t=""!=t?"width={0}".format(t+10):"",r=l(e),r=""!=r?"height={0}".format(r+10):"",a=(""!=t?"&".width:"")+(""!=r?"&"+r:""),E.html(e),tb_show("Preview","#TB_inline?inlineId=ad-preview&modal=false"+a,null),!0)}function s(){return"mode_basic"===M.val()&&t()?d(c):c(D.val()),!0}var y=jQuery("#id"),f=jQuery("#title"),h=jQuery("#title_info"),_=jQuery("#ad_media_url"),m=jQuery("#ad_media_url_info"),v=jQuery("#ad_size"),p=jQuery("#ad_link_url"),j=(jQuery("#ad_link_url_info"),jQuery("#ad_audio_url")),Q=(jQuery("#ad_audio_url_info"),jQuery("#ad_hint")),b=jQuery("#scheduele"),k=jQuery("#ad_schedule_df"),C=jQuery("#ad_schedule_df_info"),w=jQuery("#ad_schedule_dt"),x=jQuery("#ad_schedule_dt_info"),g=jQuery("select#ad_position").multiselect({minWidth:700,selectedText:"# positions selected",noneSelectedText:"Select banner positions",selectedList:1,position:{my:"left bottom",at:"left top",collision:"flip"}}).multiselectfilter({width:"150",placeholder:"Enter position",autoReset:!0}),A=jQuery("#ad_position_info"),S=jQuery("#sched_add_button"),M=jQuery("#ad_mode"),T=jQuery("ul#mode"),D=(jQuery("#ad_modes_synced"),jQuery("textarea#content")),E=jQuery("#ad-preview");f.focus(),f.change(e),_.change(t),g.change(r),jQuery(function(){jQuery("#ad_schedule_df").datepicker({dateFormat:"yy-mm-dd",changeMonth:!0,changeYear:!0}),jQuery("#ad_schedule_dt").datepicker({dateFormat:"yy-mm-dd",changeMonth:!0,changeYear:!0})}),S.click(function(){var e=!0,t="";return(e=a())?(""!=b.val()&&(t+=","),t+=k.val()+":"+w.val(),b.val(b.val()+t),k.val(""),void w.val("")):!1}),k.change(n),w.change(o),jQuery("#save").click(function(a){var n=!0;if(n=r()?n:!1,"mode_basic"==M.val()&&(n=t()?n:!1),n=e()?n:!1){var o=jQuery("form#post").attr("action");jQuery("form#post").attr("action",o+"&action=edit&id="+jQuery("input#id").val())}else a.preventDefault()}),jQuery("#delete").click(function(e){confirm("Are you sure you want to delete this content?")||e.preventDefault()}),jQuery("#ad_media_button").click(function(){return i({select:function(e){return _.val(e),e},title:"Select Banner Image/Animation"}),!1}),jQuery("#ad_link_button").click(function(){return i({select:function(e){return p.val(e),e},title:"Select Banner Attachment"}),!1}),jQuery("#ad_audio_button").click(function(){return i({select:function(e){return j.val(e),e},title:"Select Banner Audio",media_type:"audio"}),!1}),jQuery("#preview-button").click(function(){return s()}),T.each(function(){var e,t,r=jQuery(this).find("a");e=jQuery(r.filter('[id="'+M.val()+'"]')[0]||r[0]),e.addClass("tabs-current"),t=jQuery("."+e.attr("id")),M.val(e.attr("id")),r.not(e).each(function(){jQuery("."+jQuery(this).attr("id")).hide()}),jQuery(this).on("click","a",function(r){e.removeClass("tabs-current"),t.hide(),e=jQuery(this),t=jQuery("."+e.attr("id")),M.val(e.attr("id")),e.addClass("tabs-current"),t.show(),r.preventDefault()})}),Array.prototype.map||(Array.prototype.map=function(e){var t=this.length;if("function"!=typeof e)throw new TypeError;for(var r=new Array(t),a=arguments[1],n=0;t>n;n++)n in this&&(r[n]=e.call(a,this[n],n,this));return r}),Array.prototype.closest||(Array.prototype.closest=function(e){if(e=+e,"number"!=typeof e)throw new TypeError;for(var t=Number.MAX_VALUE,r=0;r<this.length;++r)r in this&&(t=Math.abs(+this[r]-e)<Math.abs(t)?+this[r]-e:t);return e+t})}),jQuery(document).ready(function(){jQuery("input[type=checkbox]#rotate").change(function(){var e=jQuery(this).attr("checked");e?(jQuery("input#rotate_time").val()||jQuery("input#rotate_time").val(7),jQuery("tr#positions_edit_rotate_time").show()):jQuery("tr#positions_edit_rotate_time").hide()}),jQuery("#select_all_template").click(function(){var e=jQuery(this).is(":checked");jQuery('#template-positions input[type=checkbox][name="selected_template_positions[]"]').each(function(){e?jQuery(this).attr("checked",e):jQuery(this).removeAttr("checked")})})}),jQuery(document).ready(function(){var e=jQuery("#apply_button"),t=jQuery("#bulk_actions"),r=jQuery("#select_all");e.click(function(e){""==t.val()&&e.preventDefault(),"delete"!=t.val()||confirm("Are you sure you want to delete this content?")||e.preventDefault()}),r.click(function(){var e=r.is(":checked");jQuery("input[type=checkbox]").each(function(){e?jQuery(this).attr("checked",e):jQuery(this).removeAttr("checked")})})});
jQuery(document).ready(function(){String.prototype.format=function(){var e=arguments;return this.replace(/{(\d+)}/g,function(t,r){return void 0!==e[r]?e[r]:t})}}),jQuery(document).ready(function(){if(0==jQuery("body.ad-minister_page_ad-minister-banner").length)return!1;var e=jQuery("#id"),t=jQuery("#title"),r=jQuery("#title_info"),a=jQuery("#ad_media_url"),n=jQuery("#ad_media_url_info"),i=jQuery("#ad_size"),o=jQuery("#ad_link_url"),u=(jQuery("#ad_link_url_info"),jQuery("#ad_audio_url")),l=(jQuery("#ad_audio_url_info"),jQuery("#ad_hint")),d=jQuery("#scheduele"),c=jQuery("#ad_schedule_df"),s=jQuery("#ad_schedule_df_info"),y=jQuery("#ad_schedule_dt"),h=jQuery("#ad_schedule_dt_info"),f=jQuery("select#ad_position").multiselect({minWidth:700,selectedText:"# positions selected",noneSelectedText:"Select banner positions",selectedList:1,position:{my:"left bottom",at:"left top",collision:"flip"}}).multiselectfilter({width:"150",placeholder:"Enter position",autoReset:!0}),_=jQuery("#ad_position_info"),m=jQuery("#sched_add_button"),v=jQuery("#ad_mode"),p=jQuery("ul#mode"),j=(jQuery("#ad_modes_synced"),jQuery("textarea#content")),Q=jQuery("#ad-preview");function b(){return""==t.val()?(t.focus(),t.addClass("error"),r.text("Title cannot be empty"),r.addClass("error"),r.show(),!1):(t.removeClass("error"),r.text(""),r.removeClass("error"),r.hide(),!0)}function k(){return""==a.val()?(a.focus(),a.addClass("error"),n.text("Media URL cannot be empty"),n.addClass("error"),n.show(),!1):(a.removeClass("error"),n.text(""),n.removeClass("error"),n.hide(),!0)}function C(){return null==f.val()?(f.focus(),f.addClass("error"),_.text("Please select a banner position"),_.addClass("error"),_.show(),!1):(f.removeClass("error"),_.text(""),_.removeClass("error"),_.hide(),!0)}function w(){return""==c.val()?(c.addClass("error"),s.text("Please select a date"),s.addClass("error"),s.show(),!1):(c.removeClass("error"),s.text(""),s.removeClass("error"),s.hide(),!0)}function x(){return""==y.val()?(y.addClass("error"),h.text("Please select a date"),h.addClass("error"),h.show(),!1):(y.removeClass("error"),h.text(""),h.removeClass("error"),h.hide(),!0)}function g(e){if(void 0===e)return!1;if("object"!=typeof e&&"function"!=typeof e)return!1;"function"==typeof e&&(e={select:e,title:"Select Media",button_text:"Select",media_type:""}),void 0===e.title&&(e.title="Select Media"),void 0===e.button_text&&(e.button_text="Select"),void 0===e.media_type&&(e.media_type="");var t=wp.media({frame:"select",title:e.title,button:{text:e.button_text},library:{type:e.media_type},multiple:!1}).on("select",function(){var r=t.state().get("selection").first().toJSON();e.select(r.url)}).open()}function A(e){var t,r;return t=/[\[<][^\]>]+width=['"]([\d]+)['"]/i,null!=(r=e.match(t))?r[1]+"":""}function S(e){var t,r;return t=/[\[<][^\]>]+height=['"]([\d]+)['"]/i,null!=(r=e.match(t))?r[1]+"":""}function M(t){var r={action:"administer_build_code",ad_mode:"mode_basic",ad_id:e.val(),ad_media_url:a.val(),ad_size:i.val(),ad_link_url:o.val(),ad_audio_url:u.val(),ad_hint:l.val()};jQuery.post(ajaxurl,r,function(e){return t(e),e})}function T(e){var t,r,a;return""==e?(Q.html("No content to preview."),!1):(t=""!=(t=A(e))?"width={0}".format(t+10):"",r=""!=(r=S(e))?"height={0}".format(r+10):"",a=(""!=t?"&".width:"")+(""!=r?"&"+r:""),Q.html(e),tb_show("Preview","#TB_inline?inlineId=ad-preview&modal=false"+a,null),!0)}t.focus(),t.change(b),a.change(k),f.change(C),jQuery(function(){jQuery("#ad_schedule_df").datepicker({dateFormat:"yy-mm-dd",changeMonth:!0,changeYear:!0}),jQuery("#ad_schedule_dt").datepicker({dateFormat:"yy-mm-dd",changeMonth:!0,changeYear:!0})}),m.click(function(){var e="";if(!function(){if(!w()||!x())return!1;if(c.val()>y.val())return c.addClass("error"),s.text("Start date > End date"),s.addClass("error"),s.show(),!1;return c.removeClass("error"),s.text(""),s.removeClass("error"),s.hide(),!0}())return!1;""!=d.val()&&(e+=","),e+=c.val()+":"+y.val(),d.val(d.val()+e),c.val(""),y.val("")}),c.change(w),y.change(x),jQuery("#save").click(function(e){var t=!0;if(t=!!C()&&t,"mode_basic"==v.val()&&(t=!!k()&&t),t=!!b()&&t){var r=jQuery("form#post").attr("action");jQuery("form#post").attr("action",r+"&action=edit&id="+jQuery("input#id").val())}else e.preventDefault()}),jQuery("#delete").click(function(e){confirm("Are you sure you want to delete this content?")||e.preventDefault()}),jQuery("#ad_media_button").click(function(){return g({select:function(e){return a.val(e),e},title:"Select Banner Image/Animation"}),!1}),jQuery("#ad_link_button").click(function(){return g({select:function(e){return o.val(e),e},title:"Select Banner Attachment"}),!1}),jQuery("#ad_audio_button").click(function(){return g({select:function(e){return u.val(e),e},title:"Select Banner Audio",media_type:"audio"}),!1}),jQuery("#preview-button").click(function(){return function(){"mode_basic"===v.val()&&k()?M(T):T(j.val());return!0}()}),p.each(function(){var e,t,r=jQuery(this).find("a");(e=jQuery(r.filter('[id="'+v.val()+'"]')[0]||r[0])).addClass("tabs-current"),t=jQuery("."+e.attr("id")),v.val(e.attr("id")),r.not(e).each(function(){jQuery("."+jQuery(this).attr("id")).hide()}),jQuery(this).on("click","a",function(r){e.removeClass("tabs-current"),t.hide(),e=jQuery(this),t=jQuery("."+e.attr("id")),v.val(e.attr("id")),e.addClass("tabs-current"),t.show(),r.preventDefault()})}),Array.prototype.map||(Array.prototype.map=function(e){var t=this.length;if("function"!=typeof e)throw new TypeError;for(var r=new Array(t),a=arguments[1],n=0;n<t;n++)n in this&&(r[n]=e.call(a,this[n],n,this));return r}),Array.prototype.closest||(Array.prototype.closest=function(e){if("number"!=typeof(e=+e))throw new TypeError;for(var t=Number.MAX_VALUE,r=0;r<this.length;++r)r in this&&(t=Math.abs(+this[r]-e)<Math.abs(t)?+this[r]-e:t);return e+t})}),jQuery(document).ready(function(){if(0==jQuery("body.ad-minister_page_ad-minister-positions").length)return!1;jQuery("input[type=checkbox]#rotate").change(function(){jQuery(this).attr("checked")?(jQuery("input#rotate_time").val()||jQuery("input#rotate_time").val(7),jQuery("tr#positions_edit_rotate_time").show()):jQuery("tr#positions_edit_rotate_time").hide()}),jQuery("#select_all_template").click(function(){var e=jQuery(this).is(":checked");jQuery('#template-positions input[type=checkbox][name="selected_template_positions[]"]').each(function(){e?jQuery(this).attr("checked",e):jQuery(this).removeAttr("checked")})})}),jQuery(document).ready(function(){var e=jQuery("#apply_button"),t=jQuery("#bulk_actions"),r=jQuery("#select_all");e.click(function(e){""==t.val()&&e.preventDefault(),"delete"!=t.val()||confirm("Are you sure you want to delete this content?")||e.preventDefault()}),r.click(function(){var e=r.prop("checked");jQuery("input[type=checkbox]").each(function(){e?jQuery(this).attr("checked",e):jQuery(this).removeAttr("checked")})})});